global
    log stdout local0
    maxconn 2000

defaults
    log global
    mode tcp
    option tcplog
    timeout connect 5s
    timeout client 50s
    timeout server 50s

# Stats page
listen stats
    bind *:8404
    mode http
    stats enable
    stats uri /stats
    stats refresh 5s

# Frontend
frontend auth_frontend
    bind *:9001
    default_backend auth_backend

# Backend with load balancing
backend auth_backend
    balance roundrobin
    option tcp-check
    server auth1 auth_service_1:9001 check inter 3s rise 2 fall 3
    server auth2 auth_service_2:9001 check inter 3s rise 2 fall 3
